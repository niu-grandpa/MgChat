# 需求分析

## 登录

### 简易流程图							

​						  	注册 & 忘记密码 ——> 显示注册/找回密码窗口

​									|				 |

打开软件 ——> 显示登录窗口 ——> 显示用户面板 ——> 获取用户数据渲染

​									|			 |				   |

​								手动 & 自动 	——>

#### 一、校验

点击登录时校验触发，分为两步：

  第一步，检查账号密码是否为空如果是则显示错误提示消息，否则检查账号长度是否达到标准，MG账号为8位，手机号码为11位且最大输入长度为11位。

  第二步，上一步通过校验后检查账号长度如果为11位说明输入的是手机号码按照手机号正则校验即可，如果是9位说明是MG账号，需要通过查后端数据库是否存在该账号，同时通过正则校验密码格式是否合法（长度至少为8，至少含有一个字母和一个数字）。

#### 二、登录

登录方式分两种，自动和手动点击登录，自动登录的前提是勾选了记住密码选项，因此需要连带自动选择记住密码。

自动登录，打开软件时从用户登录历史中获取第一个用户（即上次最后登录的用户），假如该用户数据中自动登录选项为 true 则执行登录函数。

手动登录，无记住密码选项则手动输密码否则自动填充，点击登录按钮执行登录函数。

#### 三、保存和获取历史用户

用户一旦登录成功代表着这是一个有效用户会，将账号信息缓存到本地中，缓存的内容有：账号、头像、昵称、密码、是否记住密码以及是否自动登录。头像和用户名则会在登录成功时返回，其余通过表单获取。

从本地缓存获取到历史登录用户，方便用户在账号输入栏下拉菜单中能够浏览以及快捷填充账号密码等信息。

## 注册

#### 一、校验 

简易描述过程：昵称 ----> 密码 ----> 确认密码 ----> 手机号码 ----> 验证码。

用户注册需要填写的必要项目包括：昵称、密码、确认密码、手机号码和验证码。触发校验时机有两个，一个是在输入框失去焦点时，另一个则在最后一步点击立即注册按钮时触发总校验，同时通过接口查询验证码是否有效。

步骤：

1.校验昵称不为空，可以是任何字符。【错误提示：“昵称不能为空”】

2.密码校验规则8-16个字符,不包含空格,必须包含数字,字母或字符至少两种。【错误提示：“请填写密码”，“密码不符合规则”】

3.确认密码的校验则必须和上一步输入的密码完全一致。【错误提示：“请填写密码”，“两次的输入密码不一致”】

4.手机号码需符合现有的所有标准手机号格式。【错误提示：“请填写正确的手机号码”】

5.验证码必须4位。【错误提示：“请填写验证码”，“验证码无效”】

#### 二、成功

注册成功切换到成功结果页，要有一个关闭按钮，同时显示3个必要内容，1.用户昵称 2.派发的MG号码 3.注册的手机号码。

#### 三、失败

注册失败的原因只有一个，用户使用了已经注册过或不存在的手机号码。

##  找回密码

### 参考

【Electron 官方文档】<https://www.electronjs.org/zh/docs/latest/>

【Electron + Vite + TS + Vue3 打开新窗口实战】<https://developer.aliyun.com/article/975578#slide-4>

【Electron 无边框窗口】<https://www.jianshu.com/p/adf819473911>

【Electron 实现图片视频本地缓存】 <https://juejin.cn/post/7135640435011092510>

【找回密码功能设计】https://zhuanlan.zhihu.com/p/25171904